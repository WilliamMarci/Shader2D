## 常见库与函数

** `<memory>` ** - 智能指针（`std::unique_ptr`，`std::shared_ptr`） 替代`new`和`delete`，防止内存泄漏。


## 一些问题

没问题！面向对象（OOP）里的 `static` 和 `this` 确实比较抽象。我们用**“图纸”**和**“实物”**的比喻，配合图解来彻底搞懂它。

### 核心概念比喻

1. **类 (Class)** = **图纸** (比如“汽车设计图”)。
2. **对象/实例 (Object/Instance)** = **造出来的真车** (比如“你的那辆红色宝马”，“我的那辆蓝色宝马”)。
3. **非静态成员 (普通函数/变量)** = **车里的功能** (比如“踩油门”，“调节座椅”)。每辆车都有自己独立的油门和座椅。
4. **静态成员 (Static)** = **图纸上的标注** 或者 **工厂的公共服务** (比如“查询这款车的出厂年份”，“查询这款车的总销量”)。这不属于某辆具体的车，而是属于这个型号。

---

### 图解：普通函数 vs 静态函数

#### 1. 普通成员函数 (有 `this`)

假设我们有一个 `Car` 类，有一个 `SetSpeed` 函数。

```cpp
class Car {
    int speed; // 成员变量
    void SetSpeed(int s) { speed = s; }
};

Car myCar;
myCar.SetSpeed(100);
```

当你调用 `myCar.SetSpeed(100)` 时，实际上编译器把它转换成了这样：

```text
+----------------+       (隐式传递)        +-----------------------------------+
| myCar (对象A)   | ---------------------> | Car::SetSpeed(Car* this, int s) |
| 内存地址: 0x100 |       this = 0x100     | {                                 |
| speed: 0       |                        |    this->speed = s;               |
+----------------+                        | }                                 |
                                          +-----------------------------------+
```

* **`this` 指针**：就是 `myCar` 的地址。函数通过 `this` 才知道要修改**哪一辆车**的速度。
* **`const` 的作用**：如果你写 `void GetSpeed() const`，就是承诺：“我只读 `this->speed`，绝不修改它”。

#### 2. 静态成员函数 (无 `this`)

现在看 `Input` 类。

```cpp
class Input {
    static Window* s_Window; // 静态变量
    static bool IsKeyPressed(int key);
};

Input::IsKeyPressed(KEY_A);
```

```text
+----------------+                        +-----------------------------------+
| Input (类/图纸) | ---------------------> | Input::IsKeyPressed(int key)      |
| (不需要对象)    |       (没有 this!)     | {                                 |
|                |                        |    // 只能访问静态变量             |
| static s_Window| <--------------------- |    check(s_Window, key);          |
+----------------+                        | }                                 |
                                          +-----------------------------------+
```

* **没有 `this`**：因为你不需要创建一个 `Input` 对象就能调用它。它不属于任何具体的“车”，它是“工厂”提供的服务。
* **为什么不能加 `const`？**：
  * `const` 的意思是：“不修改**当前对象** (`this`)”。
  * 静态函数连 `this` 都没有，它根本不知道“当前对象”是谁，所以承诺“不修改当前对象”是毫无意义的逻辑悖论。

![Static vs Non-Static](image/cpp/001.svg)

* **蓝色路径 (普通函数)**：必须依赖具体的对象（Obj1 或 Obj2）。`const` 锁住的是 Obj1 或 Obj2 的数据。
* **粉色路径 (静态函数)**：直接从类访问，不经过对象。没有对象，就没有 `const` 修饰的对象。

这就是为什么你的 `Input::IsKeyPressed` 不需要（也不能）加 `const` 的原因！
